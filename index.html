<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CashBook Pro - Money Changer Management</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav id="navbar" class="navbar hidden">
            <div class="nav-container">
                <div class="nav-brand">
                    <span class="nav-logo">üíº</span>
                    <span class="nav-title">CashBook Pro</span>
                </div>
                <div class="nav-user">
                    <span id="user-info"></span>
                    <button id="admin-settings-btn" class="btn-secondary hidden">Admin Settings</button>
                    <button id="logout-btn" class="btn-logout">Logout</button>
                </div>
            </div>
        </nav>

        <!-- Login Page -->
        <div id="login-page" class="page">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <div class="auth-logo">üíº</div>
                        <h1>CashBook Pro</h1>
                        <p>Money Changer Management System</p>
                        <div class="status-badge success">In-Memory MongoDB Active</div>
                    </div>
                    
                    <form id="login-form" class="auth-form">
                        <div class="form-group">
                            <label for="login-username">Username or Email</label>
                            <input type="text" id="login-username" name="username" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" name="password" required>
                        </div>
                        
                        <button type="submit" class="btn-primary">Sign In</button>
                        
                        <div class="auth-links">
                            <a href="#" id="show-forgot-password">Forgot your password?</a>
                            <a href="#" id="show-register" class="btn-secondary">Register as Money Changer</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register-page" class="page hidden">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <div class="auth-logo">üë§</div>
                        <h1>Register New Account</h1>
                        <p>Join CashBook Pro as a Money Changer</p>
                    </div>
                    
                    <form id="register-form" class="auth-form">
                        <div class="form-group">
                            <label for="business-name">Business Name</label>
                            <input type="text" id="business-name" name="businessName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="full-name">Full Name</label>
                            <input type="text" id="full-name" name="fullName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" name="username" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" name="password" required minlength="6">
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-password">Confirm Password</label>
                            <input type="password" id="confirm-password" name="confirmPassword" required minlength="6">
                        </div>
                        
                        <button type="submit" class="btn-primary">Create Account</button>
                        
                        <div class="auth-links">
                            <a href="#" id="show-login">‚Üê Back to Sign In</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Forgot Password Page -->
        <div id="forgot-password-page" class="page hidden">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <div class="auth-logo">üîê</div>
                        <h1>Reset Password</h1>
                        <p>Enter your email to receive a reset code</p>
                        <div class="status-badge info">Email Reset Available</div>
                    </div>
                    
                    <form id="forgot-password-form" class="auth-form">
                        <div class="form-group">
                            <label for="reset-email">Email Address</label>
                            <input type="email" id="reset-email" name="email" required>
                        </div>
                        
                        <button type="submit" class="btn-primary">Send Reset Code</button>
                        
                        <div class="auth-links">
                            <a href="#" id="back-to-login">‚Üê Back to Sign In</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Reset Password Page -->
        <div id="reset-password-page" class="page hidden">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <div class="auth-logo">üîë</div>
                        <h1>Enter Reset Code</h1>
                        <p>Check your email for the 6-digit code</p>
                    </div>
                    
                    <form id="reset-password-form" class="auth-form">
                        <div class="form-group">
                            <label for="reset-code">Verification Code</label>
                            <input type="text" id="reset-code" name="code" required maxlength="6" pattern="[0-9]{6}">
                        </div>
                        
                        <div class="form-group">
                            <label for="new-password">New Password</label>
                            <input type="password" id="new-password" name="newPassword" required minlength="6">
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-new-password">Confirm Password</label>
                            <input type="password" id="confirm-new-password" name="confirmPassword" required minlength="6">
                        </div>
                        
                        <button type="submit" class="btn-primary">Reset Password</button>
                        
                        <div class="auth-links">
                            <a href="#" id="back-to-forgot">‚Üê Back to Email</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Payment Page -->
        <div id="payment-page" class="page hidden">
            <div class="container">
                <div class="payment-container">
                    <div class="payment-header">
                        <div class="payment-icon">üí≥</div>
                        <h1>Complete Your Payment</h1>
                        <p>Account Status: <span id="account-status-badge" class="status-badge"></span></p>
                    </div>
                    
                    <div class="payment-content">
                        <div class="warning-banner">
                            <div class="warning-icon">‚ö†Ô∏è</div>
                            <div>
                                <h3>IMPORTANT PAYMENT INSTRUCTIONS</h3>
                                <p>DO NOT send money directly to the Mobile Money number below. Contact us on WhatsApp first to verify your payment details.</p>
                            </div>
                        </div>
                        
                        <div class="payment-details">
                            <div class="subscription-details">
                                <h3>Subscription Details</h3>
                                <div class="price-breakdown">
                                    <div class="price-item">
                                        <span>Monthly Subscription</span>
                                        <span>$25.00</span>
                                    </div>
                                    <div class="price-item">
                                        <span>Duration</span>
                                        <span>30 Days</span>
                                    </div>
                                    <div class="price-total">
                                        <span>Total Amount</span>
                                        <span>$25.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="payment-instructions">
                                <h3>Payment Instructions</h3>
                                <div class="contact-info">
                                    <div class="contact-item">
                                        <span>Mobile Money Number</span>
                                        <strong>+256 700 123 456</strong>
                                    </div>
                                    <div class="contact-item">
                                        <span>WhatsApp Contact</span>
                                        <strong>+256 700 123 456</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="payment-process">
                            <h4>Payment Process:</h4>
                            <ol>
                                <li>Contact us on WhatsApp: <strong>+256 700 123 456</strong></li>
                                <li>Provide your account details</li>
                                <li>Get payment verification and instructions</li>
                                <li>Complete payment via Mobile Money</li>
                                <li>Send confirmation on WhatsApp</li>
                                <li>Account activated within 1-2 hours</li>
                            </ol>
                        </div>
                        
                        <div class="payment-actions">
                            <a href="https://wa.me/256700123456" target="_blank" class="btn-whatsapp">
                                üì± Contact WhatsApp
                            </a>
                            <button id="back-to-dashboard" class="btn-secondary">‚Üê Back to Dashboard</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Owner Dashboard -->
        <div id="owner-dashboard" class="page hidden">
            <div class="container">
                <div class="dashboard-header">
                    <h1>Owner Dashboard</h1>
                    <p>System administration and client management</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <div class="stat-label">Total Clients</div>
                            <div class="stat-value" id="total-clients">0</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <div class="stat-label">Active Clients</div>
                            <div class="stat-value" id="active-clients">0</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">‚è∞</div>
                        <div class="stat-content">
                            <div class="stat-label">Pending Payments</div>
                            <div class="stat-value" id="pending-payments">0</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <div class="stat-label">Monthly Revenue</div>
                            <div class="stat-value" id="monthly-revenue">$0</div>
                        </div>
                    </div>
                </div>

                <!-- Backend Status -->
                <div class="backend-status">
                    <h3>In-Memory MongoDB Status</h3>
                    <div class="status-indicators">
                        <div class="status-item">
                            <span class="status-dot success"></span>
                            <span>MongoDB Simulation Active</span>
                        </div>
                        <div class="status-item">
                            <span class="status-dot success"></span>
                            <span>Express Server Running</span>
                        </div>
                        <div class="status-item">
                            <span class="status-dot success"></span>
                            <span>All APIs Functional</span>
                        </div>
                    </div>
                </div>
                
                <div class="section-header">
                    <h2>Client Management</h2>
                    <div class="filters">
                        <input type="text" id="search-clients" placeholder="Search clients...">
                        <select id="status-filter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>
                
                <div class="clients-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Client</th>
                                <th>Status</th>
                                <th>Subscription</th>
                                <th>Last Payment</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="clients-tbody">
                            <!-- Clients will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Client Dashboard -->
        <div id="client-dashboard" class="page hidden">
            <div class="container">
                <div class="dashboard-header">
                    <h1>Client Dashboard</h1>
                    <p>Manage your money exchange transactions</p>
                </div>

                <!-- Account Status -->
                <div class="account-status">
                    <h3>Account Status</h3>
                    <div class="status-grid">
                        <div class="status-item">
                            <span>Current Status</span>
                            <span id="current-status" class="status-badge">Active</span>
                        </div>
                        <div class="status-item">
                            <span>Subscription Expires</span>
                            <span id="subscription-end">N/A</span>
                        </div>
                        <div class="status-item">
                            <span>Days Remaining</span>
                            <span id="days-remaining">N/A</span>
                        </div>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-content">
                            <div class="stat-label">Today's Profit</div>
                            <div class="stat-value" id="today-profit">$0.00</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üíµ</div>
                        <div class="stat-content">
                            <div class="stat-label">USD Balance</div>
                            <div class="stat-value" id="usd-balance">$0.00</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üí∏</div>
                        <div class="stat-content">
                            <div class="stat-label">UGX Balance</div>
                            <div class="stat-value" id="ugx-balance">UGX 0</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üî¢</div>
                        <div class="stat-content">
                            <div class="stat-label">Transaction Count</div>
                            <div class="stat-value" id="transaction-count">0</div>
                        </div>
                    </div>
                </div>
                
                <div class="section-header">
                    <h2>Quick Actions</h2>
                    <div class="quick-actions">
                        <button id="add-transaction-btn" class="btn-primary">Add Transaction</button>
                        <button id="update-balance-btn" class="btn-secondary">Update Balance</button>
                    </div>
                </div>
                
                <div class="section-header">
                    <h2>Recent Transactions</h2>
                </div>
                
                <div class="transactions-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>Rate</th>
                                <th>Converted</th>
                                <th>Profit</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-tbody">
                            <!-- Transactions will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Admin Settings Modal -->
        <div id="admin-settings-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Admin Settings</h3>
                    <button id="close-admin-settings" class="close-btn">&times;</button>
                </div>
                <form id="admin-settings-form">
                    <div class="form-group">
                        <label for="admin-username">Username</label>
                        <input type="text" id="admin-username" name="username" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-email">Email</label>
                        <input type="email" id="admin-email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-current-password">Current Password</label>
                        <input type="password" id="admin-current-password" name="currentPassword" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-new-password">New Password (optional)</label>
                        <input type="password" id="admin-new-password" name="newPassword">
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-confirm-password">Confirm New Password</label>
                        <input type="password" id="admin-confirm-password" name="confirmPassword">
                    </div>
                    
                    <div class="modal-actions">
                        <button type="submit" class="btn-primary">Update Settings</button>
                        <button type="button" id="cancel-admin-settings" class="btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Add Transaction Modal -->
        <div id="add-transaction-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add New Transaction</h3>
                    <button id="close-add-transaction" class="close-btn">&times;</button>
                </div>
                <form id="add-transaction-form">
                    <div class="form-group">
                        <label for="customer-name">Customer Name</label>
                        <input type="text" id="customer-name" name="customerName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="transaction-type">Transaction Type</label>
                        <select id="transaction-type" name="transactionType" required>
                            <option value="">Select type</option>
                            <option value="usd_to_ugx">USD to UGX</option>
                            <option value="ugx_to_usd">UGX to USD</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="amount">Amount</label>
                        <input type="number" id="amount" name="amount" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="exchange-rate">Exchange Rate</label>
                        <input type="number" id="exchange-rate" name="exchangeRate" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes">Notes (optional)</label>
                        <textarea id="notes" name="notes" rows="3"></textarea>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="submit" class="btn-primary">Add Transaction</button>
                        <button type="button" id="cancel-add-transaction" class="btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Update Balance Modal -->
        <div id="update-balance-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Update Balance</h3>
                    <button id="close-update-balance" class="close-btn">&times;</button>
                </div>
                <form id="update-balance-form">
                    <div class="form-group">
                        <label for="usd-balance-input">USD Balance</label>
                        <input type="number" id="usd-balance-input" name="usdBalance" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="ugx-balance-input">UGX Balance</label>
                        <input type="number" id="ugx-balance-input" name="ugxBalance" step="0.01" required>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="submit" class="btn-primary">Update Balance</button>
                        <button type="button" id="cancel-update-balance" class="btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-spinner"></div>
            <p>Loading...</p>
        </div>

        <!-- Toast Container -->
        <div id="toast-container"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>